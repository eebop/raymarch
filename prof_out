--------------------------------------------------------------------------------
Profile data file 'callgrind.out.379082' (creator: callgrind-3.18.1)
--------------------------------------------------------------------------------
I1 cache: 
D1 cache: 
LL cache: 
Timerange: Basic block 0 - 14680390893
Trigger: Program termination
Profiled target:  ./main (PID 379082, part 1)
Events recorded:  Ir
Events shown:     Ir
Event sort order: Ir
Thresholds:       99
Include dirs:     
User annotated:   
Auto-annotation:  on

--------------------------------------------------------------------------------
Ir                      
--------------------------------------------------------------------------------
64,358,964,816 (100.0%)  PROGRAM TOTALS

--------------------------------------------------------------------------------
Ir                       file:function
--------------------------------------------------------------------------------
36,238,002,792 (56.31%)  ./math/../sysdeps/ieee754/dbl-64/e_fmod.c:__fmod_finite@GLIBC_2.15 [/usr/lib/x86_64-linux-gnu/libm.so.6]
14,153,687,574 (21.99%)  main.c:find_one [/home/eebop/raymarch/main]
 9,743,673,168 (15.14%)  ./math/./math/w_fmod_compat.c:fmod [/usr/lib/x86_64-linux-gnu/libm.so.6]
 1,623,945,528 ( 2.52%)  ???:0x00000000001092b0 [???]
   201,169,675 ( 0.31%)  ???:0x0000000000067b00 [/usr/lib/x86_64-linux-gnu/libSDL2-2.0.so.0.18.2]
   138,240,108 ( 0.21%)  ???:0x0000000000059010 [/usr/lib/x86_64-linux-gnu/libSDL2-2.0.so.0.18.2]
   130,560,000 ( 0.20%)  ???:0x0000000000059240 [/usr/lib/x86_64-linux-gnu/libSDL2-2.0.so.0.18.2]
   125,590,436 ( 0.20%)  ./gmon/./gmon/mcount.c:__mcount_internal [/usr/lib/x86_64-linux-gnu/libc.so.6]
   120,320,000 ( 0.19%)  ???:0x0000000000059450 [/usr/lib/x86_64-linux-gnu/libSDL2-2.0.so.0.18.2]
   113,919,658 ( 0.18%)  ???:0x00000000002633f0 [/opt/amdgpu/lib/x86_64-linux-gnu/dri/radeonsi_dri.so]
   103,680,041 ( 0.16%)  ???:0x0000000000052150 [/usr/lib/x86_64-linux-gnu/libSDL2-2.0.so.0.18.2]
    86,256,498 ( 0.13%)  ???:0x000000000002ee90 [/opt/amdgpu/lib/x86_64-linux-gnu/libGLX_mesa.so.0.0.0]
    80,761,506 ( 0.13%)  ./gmon/../sysdeps/x86_64/_mcount.S:mcount [/usr/lib/x86_64-linux-gnu/libc.so.6]
    80,695,054 ( 0.13%)  main.c:main [/home/eebop/raymarch/main]
    71,680,049 ( 0.11%)  ???:0x00000000000654c0 [/usr/lib/x86_64-linux-gnu/libSDL2-2.0.so.0.18.2]
    70,400,000 ( 0.11%)  ???:SDL_RenderDrawPoint [/usr/lib/x86_64-linux-gnu/libSDL2-2.0.so.0.18.2]
    64,000,156 ( 0.10%)  ???:0x0000000000263aa0 [/opt/amdgpu/lib/x86_64-linux-gnu/dri/radeonsi_dri.so]
    61,327,292 ( 0.10%)  ???:0x0000000000267510 [/opt/amdgpu/lib/x86_64-linux-gnu/dri/radeonsi_dri.so]
    46,753,328 ( 0.07%)  ./elf/./elf/dl-lookup.c:do_lookup_x [/usr/lib/x86_64-linux-gnu/ld-linux-x86-64.so.2]
    44,800,000 ( 0.07%)  ???:0x0000000000067110 [/usr/lib/x86_64-linux-gnu/libSDL2-2.0.so.0.18.2]
    44,799,650 ( 0.07%)  ???:0x0000000000262f90 [/opt/amdgpu/lib/x86_64-linux-gnu/dri/radeonsi_dri.so]
    37,120,014 ( 0.06%)  ???:0x00000000001241b0 [/usr/lib/x86_64-linux-gnu/libSDL2-2.0.so.0.18.2]
    31,893,664 ( 0.05%)  ???:0x00000000001ca920 [/opt/amdgpu/lib/x86_64-linux-gnu/dri/radeonsi_dri.so]
    30,723,095 ( 0.05%)  ???:0x0000000000315380 [/opt/amdgpu/lib/x86_64-linux-gnu/dri/radeonsi_dri.so]
    30,720,012 ( 0.05%)  ???:0x0000000000058f70 [/usr/lib/x86_64-linux-gnu/libSDL2-2.0.so.0.18.2]
    28,160,617 ( 0.04%)  ???:0x000000000011e4c0 [/usr/lib/x86_64-linux-gnu/libSDL2-2.0.so.0.18.2]
    28,160,088 ( 0.04%)  ???:0x00000000000ce960 [/usr/lib/x86_64-linux-gnu/libSDL2-2.0.so.0.18.2]
    25,725,613 ( 0.04%)  ./malloc/./malloc/malloc.c:_int_malloc [/usr/lib/x86_64-linux-gnu/libc.so.6]
    24,770,395 ( 0.04%)  ???:0x0000000000128c60 [/usr/lib/x86_64-linux-gnu/libSDL2-2.0.so.0.18.2]
    24,356,632 ( 0.04%)  /usr/lib/gcc/x86_64-linux-gnu/11/include/avxintrin.h:multiplyQuaternion
    24,356,632 ( 0.04%)  /usr/lib/gcc/x86_64-linux-gnu/11/include/avxintrin.h:multiplyWithInverseFirstQuaternion
    24,320,190 ( 0.04%)  ???:0x00000000000cfa10 [/usr/lib/x86_64-linux-gnu/libSDL2-2.0.so.0.18.2]
    24,320,114 ( 0.04%)  ???:0x0000000000063ec0 [/usr/lib/x86_64-linux-gnu/libSDL2-2.0.so.0.18.2]
    23,420,866 ( 0.04%)  ???:0x000000000009a3d0 [/opt/amdgpu/lib/x86_64-linux-gnu/dri/radeonsi_dri.so]
    23,066,306 ( 0.04%)  ???:0x0000000000316980 [/opt/amdgpu/lib/x86_64-linux-gnu/dri/radeonsi_dri.so]

--------------------------------------------------------------------------------
-- Auto-annotated source: /usr/lib/gcc/x86_64-linux-gnu/11/include/avxintrin.h
--------------------------------------------------------------------------------
Ir                  

-- line 135 ----------------------------------------
         .           /* Greater-than (ordered, non-signaling)  */
         .           #define _CMP_GT_OQ	0x1e
         .           /* True (unordered, signaling)  */
         .           #define _CMP_TRUE_US	0x1f
         .           
         .           extern __inline __m256d __attribute__((__gnu_inline__, __always_inline__, __artificial__))
         .           _mm256_add_pd (__m256d __A, __m256d __B)
         .           {
 7,691,568 ( 0.01%)    return (__m256d) ((__v4df)__A + (__v4df)__B);
         .           }
         .           
         .           extern __inline __m256 __attribute__((__gnu_inline__, __always_inline__, __artificial__))
         .           _mm256_add_ps (__m256 __A, __m256 __B)
         .           {
         .             return (__m256) ((__v8sf)__A + (__v8sf)__B);
         .           }
         .           
-- line 151 ----------------------------------------
-- line 306 ----------------------------------------
         .           _mm256_min_ps (__m256 __A, __m256 __B)
         .           {
         .             return (__m256) __builtin_ia32_minps256 ((__v8sf)__A, (__v8sf)__B);
         .           }
         .           
         .           extern __inline __m256d __attribute__((__gnu_inline__, __always_inline__, __artificial__))
         .           _mm256_mul_pd (__m256d __A, __m256d __B)
         .           {
 5,127,712 ( 0.01%)    return (__m256d) ((__v4df)__A * (__v4df)__B);
         .           }
         .           
         .           extern __inline __m256 __attribute__((__gnu_inline__, __always_inline__, __artificial__))
         .           _mm256_mul_ps (__m256 __A, __m256 __B)
         .           {
         .             return (__m256) ((__v8sf)__A * (__v8sf)__B);
         .           }
         .           
-- line 322 ----------------------------------------
-- line 650 ----------------------------------------
         .           _mm_permute_pd (__m128d __X, const int __C)
         .           {
         .             return (__m128d) __builtin_ia32_vpermilpd ((__v2df)__X, __C);
         .           }
         .           
         .           extern __inline __m256d __attribute__((__gnu_inline__, __always_inline__, __artificial__))
         .           _mm256_permute_pd (__m256d __X, const int __C)
         .           {
 5,127,712 ( 0.01%)    return (__m256d) __builtin_ia32_vpermilpd256 ((__v4df)__X, __C);
         .           }
         .           
         .           extern __inline __m128 __attribute__((__gnu_inline__, __always_inline__, __artificial__))
         .           _mm_permute_ps (__m128 __X, const int __C)
         .           {
         .             return (__m128) __builtin_ia32_vpermilps ((__v4sf)__X, __C);
         .           }
         .           
-- line 666 ----------------------------------------
-- line 885 ----------------------------------------
         .           _mm256_store_ps (float *__P, __m256 __A)
         .           {
         .             *(__m256 *)__P = __A;
         .           }
         .           
         .           extern __inline __m256d __attribute__((__gnu_inline__, __always_inline__, __artificial__))
         .           _mm256_loadu_pd (double const *__P)
         .           {
 2,563,856 ( 0.00%)    return *(__m256d_u *)__P;
         .           }
         .           
         .           extern __inline void __attribute__((__gnu_inline__, __always_inline__, __artificial__))
         .           _mm256_storeu_pd (double *__P, __m256d __A)
         .           {
 5,127,712 ( 0.01%)    *(__m256d_u *)__P = __A;
         .           }
         .           
         .           extern __inline __m256 __attribute__((__gnu_inline__, __always_inline__, __artificial__))
         .           _mm256_loadu_ps (float const *__P)
         .           {
         .             return *(__m256_u *)__P;
         .           }
         .           
-- line 907 ----------------------------------------
-- line 1243 ----------------------------------------
         .           {
         .             return __extension__ (__m256i)(__v4di){ 0, 0, 0, 0 };
         .           }
         .           
         .           /* Create the vector [A B C D].  */
         .           extern __inline __m256d __attribute__((__gnu_inline__, __always_inline__, __artificial__))
         .           _mm256_set_pd (double __A, double __B, double __C, double __D)
         .           {
23,074,704 ( 0.04%)    return __extension__ (__m256d){ __D, __C, __B, __A };
         .           }
         .           
         .           /* Create the vector [A B C D E F G H].  */
         .           extern __inline __m256 __attribute__((__gnu_inline__, __always_inline__, __artificial__))
         .           _mm256_set_ps (float __A, float __B, float __C, float __D,
         .           	       float __E, float __F, float __G, float __H)
         .           {
         .             return __extension__ (__m256){ __H, __G, __F, __E,
-- line 1259 ----------------------------------------

--------------------------------------------------------------------------------
-- Auto-annotated source: main.c
--------------------------------------------------------------------------------
Ir                     

            .           #include <stdio.h>
            .           #include <stdlib.h>
            .           #include <SDL2/SDL.h>
            .           #include <math.h>
            .           #include "main.h"
            .           #include "events.h"
            .           
            .           double dist(double i, double j, double k) {
2,175,500,704 ( 3.38%)      return sqrt(i * i + j * j + k * k) - 1;
            .           }
            .           
   17,920,000 ( 0.03%)  data find_one(quaternion p, quaternion *vec) {
   60,160,004 ( 0.09%)  => ./gmon/../sysdeps/x86_64/_mcount.S:mcount (1,280,000x)
            .               //p.i = fmod(p.i, 10);
            .               double d;
            .               data a;
            .               a.collision = 0;
    3,840,000 ( 0.01%)      a.min_distance = 255;
    1,280,000 ( 0.00%)      a.steps = 0;
    1,280,000 ( 0.00%)      a.distance = 0;
    1,280,000 ( 0.00%)      goto enter;
            .               do {
  270,657,588 ( 0.42%)          a.steps++;
  541,315,176 ( 0.84%)          p.i += vec->i * d;
  541,315,176 ( 0.84%)          p.j += vec->j * d;
  541,315,176 ( 0.84%)          p.k += vec->k * d;
  811,972,764 ( 1.26%)          a.distance += d;
1,082,630,352 ( 1.68%)          p.i = fmod(p.i, 10);
20,762,624,688 (32.26%)  => ???:0x00000000001092b0 (270,657,588x)
1,623,945,528 ( 2.52%)          p.j = fmod(p.j, 10);
13,421,467,752 (20.85%)  => ???:0x00000000001092b0 (270,657,588x)
2,706,575,880 ( 4.21%)          p.k = fmod(p.k, 10);
13,421,529,048 (20.85%)  => ???:0x00000000001092b0 (270,657,588x)
            .                   enter:
  815,812,764 ( 1.27%)          d = dist(p.i-5, p.j-5, p.k-5);
1,087,750,352 ( 1.69%)          if (d < a.min_distance) {
    4,153,278 ( 0.01%)              a.min_distance = d;
            .                   }
1,902,102,836 ( 2.96%)      } while ((d >= 0.1 && d < 1000) && (a.steps ^ 0xFF));
            .               if (a.min_distance <= 0.1) {
    5,120,000 ( 0.01%)          a.collision = 255;
            .               }
    6,400,000 ( 0.01%)      return a;
   11,520,000 ( 0.02%)  }
            .           
            4 ( 0.00%)  scene *allocScene(void) {
           51 ( 0.00%)  => ./gmon/../sysdeps/x86_64/_mcount.S:mcount (1x)
            2 ( 0.00%)      scene *s = malloc(sizeof(scene));
          205 ( 0.00%)  => ???:0x00000000001092a0 (1x)
            4 ( 0.00%)      s->c.cx = 1;
            .               s->c.cy = 0;
            .               s->c.cz = 0;
            .               s->c.q.i = 0;
            .               s->c.q.j = 0;
            .               s->c.q.k = 0;
            .               s->c.q.t = 1;
            .               s->settings.fov = 70;
            1 ( 0.00%)      s->settings.grabMouse = 0;
            1 ( 0.00%)      return s;
            2 ( 0.00%)  }
            .           
           13 ( 0.00%)  int main() {
           31 ( 0.00%)  => ./gmon/../sysdeps/x86_64/_mcount.S:mcount (1x)
            2 ( 0.00%)      SDL_Init(SDL_INIT_VIDEO);
  279,349,358 ( 0.43%)  => ???:0x0000000000109250 (1x)
            8 ( 0.00%)      SDL_Window *w = SDL_CreateWindow("Test - Raymarch", 100, 100, 800, 800, SDL_TEXTUREACCESS_TARGET);
    2,563,343 ( 0.00%)  => ???:0x00000000001091d0 (1x)
            4 ( 0.00%)      SDL_Renderer *r = SDL_CreateRenderer(w, 0, SDL_RENDERER_SOFTWARE | SDL_RENDERER_ACCELERATED | SDL_RENDERER_TARGETTEXTURE);
   22,101,215 ( 0.03%)  => ???:0x00000000001091c0 (1x)
            .           
            .               quaternion pos;
            .               quaternion dir;
            .               SDL_Event event;
            4 ( 0.00%)      scene *s = allocScene();
          270 ( 0.00%)  => main.c:allocScene (1x)
            .           
            .               while (1) {
           18 ( 0.00%)          SDL_SetRenderDrawColor(r, 0, 0, 0, 0);
           60 ( 0.00%)  => ???:0x00000000001092c0 (3x)
            6 ( 0.00%)          SDL_RenderClear(r);
          912 ( 0.00%)  => ???:0x0000000000109270 (3x)
           18 ( 0.00%)          SDL_SetRenderDrawColor(r, 255, 0, 0, 255);
           60 ( 0.00%)  => ???:0x00000000001092c0 (3x)
            .           
        7,727 ( 0.00%)          while (SDL_PollEvent(&event)) {
  237,967,807 ( 0.37%)  => ???:0x0000000000109210 (1,931x)
        3,858 ( 0.00%)              if (event.type == SDL_QUIT) {
            .                           return 0;
            .                       }
       21,208 ( 0.00%)              update_debug(event, s);
      497,436 ( 0.00%)  => /home/eebop/raymarch/events.c:update_debug (1,928x)
        7,712 ( 0.00%)              if (s->settings.grabMouse && event.type == SDL_MOUSEMOTION) {
            .                           mouseUpdate(event, s);
            .                       }
            .           
            .                   }
           16 ( 0.00%)          CREATE_QUATERNION(pos, s->c.cx, s->c.cy, s->c.cz);
            .           #pragma omp for
           32 ( 0.00%)          for (int x=0;x!=800;x++) {
           18 ( 0.00%)  => ???:0x0000000000109310 (2x)
           16 ( 0.00%)  => ???:0x0000000000109300 (2x)
           12 ( 0.00%)  => ???:0x00000000001092e0 (2x)
    3,846,402 ( 0.01%)              for (int y=0;y!=800;y++) {
    8,968,000 ( 0.01%)                  double xangle = (x - 400) / (180 * 800 / (s->settings.fov * M_PI));
    6,400,000 ( 0.01%)                  double yangle = (y - 400) / (180 * 800 / (s->settings.fov * M_PI));
            .                           //printf("%f, %f\n", xangle, yangle);
    7,680,000 ( 0.01%)                  double val = sqrt(xangle * xangle + yangle * yangle + 1);
   10,240,000 ( 0.02%)                  CREATE_QUATERNION(dir, 1 / val, yangle / val, xangle / val);
    5,120,010 ( 0.01%)                  multiplyQuaternion(&dir, &(s->c.q), &dir);
  116,479,994 ( 0.18%)  => /home/eebop/raymarch/quaternion.c:multiplyQuaternion (1,280,000x)
    5,120,000 ( 0.01%)                  multiplyWithInverseFirstQuaternion(&(s->c.q), &dir, &dir);
  116,480,002 ( 0.18%)  => /home/eebop/raymarch/quaternion.c:multiplyWithInverseFirstQuaternion (1,280,000x)
            .                           // if (x == 400 && y == 400) {
            .                           //     DEBUG_QUATERNION(&dir);
            .                           //     DEBUG_QUATERNION(&pos);
            .                           // }
    8,960,000 ( 0.01%)                  data d = find_one(pos, &dir);
61,819,469,066 (96.05%)  => main.c:find_one (1,280,000x)
   19,200,000 ( 0.03%)                  SDL_SetRenderDrawColor(r, fmin(((double) d.collision * 100.0) / d.distance, 255), 0, 0, 0xFF);
   25,600,000 ( 0.04%)  => ???:0x00000000001092c0 (1,280,000x)
   10,240,000 ( 0.02%)  => ???:0x0000000000109200 (1,280,000x)
    5,120,000 ( 0.01%)                  SDL_RenderDrawPoint(r, x, y);
1,195,903,069 ( 1.86%)  => ???:0x0000000000109260 (1,280,000x)
            .                       }
            .                   }
            4 ( 0.00%)          SDL_RenderPresent(r);
   47,298,095 ( 0.07%)  => ???:0x00000000001091e0 (2x)
            .                   printf("step done\n");
            .               }
           12 ( 0.00%)  }
--------------------------------------------------------------------------------
The following files chosen for auto-annotation could not be found:
--------------------------------------------------------------------------------
  ./elf/./elf/dl-lookup.c
  ./gmon/../sysdeps/x86_64/_mcount.S
  ./gmon/./gmon/mcount.c
  ./malloc/./malloc/malloc.c
  ./math/../sysdeps/ieee754/dbl-64/e_fmod.c
  ./math/./math/w_fmod_compat.c

--------------------------------------------------------------------------------
Ir                      
--------------------------------------------------------------------------------
14,283,095,906 (22.19%)  events annotated

